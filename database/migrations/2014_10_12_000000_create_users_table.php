<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('email')->unique();
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');<?php

            use Illuminate\Database\Migrations\Migration;
            use Illuminate\Database\Schema\Blueprint;
            use Illuminate\Support\Facades\Schema;

            return new class extends Migration
            {
                    /**
                     *      * Run the migrations.
                     *      */
                        public function up(): void
                            {
                                        Schema::create('users', function (Blueprint $table) {
                                                        $table->id();
                                                                    $table->string('first_name', 100)->nullable(); // As per docs
                                                                                $table->string('last_name', 100)->nullable(); // As per docs
                                                                                            $table->string('email')->unique();
                                                                                                        $table->string('username', 50)->unique()->nullable(); // As per docs
                                                                                                                    $table->string('password'); // Keep standard Laravel field
                                                                                                                                $table->enum('role', ['user', 'affiliate', 'admin', 'super_admin'])->default('user'); // As per docs
                                                                                                                                            $table->enum('status', ['active', 'inactive', 'suspended', 'pending'])->default('pending'); // As per docs
                                                                                                                                                        $table->timestamp('email_verified_at')->nullable(); // Keep standard Laravel field
                                                                                                                                                                    $table->boolean('email_verified')->default(false); // Add boolean field as per docs
                                                                                                                                                                                $table->boolean('two_factor_enabled')->default(false); // As per docs
                                                                                                                                                                                            $table->text('two_factor_secret')->nullable(); // As per docs
                                                                                                                                                                                                        // affiliate_id FK added later
                                                                                                                                                                                                                    $table->rememberToken(); // Keep standard Laravel field
                                                                                                                                                                                                                                $table->timestamps();
                                        });

                                                // Drop the old 'name' column if it exists
                                                        Schema::table('users', function (Blueprint $table) {
                                                                        if (Schema::hasColumn('users', 'name')) {
                                                                                            $table->dropColumn('name');
                                                                        }
                                                                    });
                                                                }

                                                                    /**
                                                                     *      * Reverse the migrations.
                                                                     *      */
                                                                        public function down(): void
                                                                            {
                                                                                        Schema::dropIfExists('users');
                                                                            }
                                                                            };
                                                                            }
                                                                     */
                                                                        }
                                                        })
                                        })
                            }
                     */
            $table->rememberToken();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void<?php

    use Illuminate\Database\Migrations\Migration;
    use Illuminate\Database\Schema\Blueprint;
    use Illuminate\Support\Facades\Schema;

    return new class extends Migration
    {
            /**
             *      * Run the migrations.
             *      */
                public function up(): void
                    {
                                Schema::create(\'plans\', function (Blueprint $table) {
                                            $table->id();
                                                        $table->string(\'name\');
                                                                    $table->text(\'description\')->nullable();
                                                                                $table->decimal(\'price_monthly\', 10, 2)->nullable();
                                                                                            $table->decimal(\'price_yearly\', 10, 2)->nullable();
                                                                                                        $table->integer(\'trial_days\')->default(0);
                                                                                                                    $table->json(\'features\')->nullable();
                                                                                                                                $table->string(\'stripe_plan_id_monthly\')->unique()->nullable();
                                                                                                                                            $table->string(\'stripe_plan_id_yearly\')->unique()->nullable();
                                                                                                                                                        $table->string(\'paypal_plan_id_monthly\')->unique()->nullable();
                                                                                                                                                                    $table->string(\'paypal_plan_id_yearly\')->unique()->nullable();
                                                                                                                                                                                $table->enum(\'status\', [\'active\', \'inactive\', \'archived\'])->default(\'active\');
                                                                                                                                                                                            $table->timestamps(); // Adds created_at and updated_at
                                                                                                                                                                                            //         });
                                                                                                                                                                                            //     }
                                                                                                                                                                                            // 
                                                                                                                                                                                                /**
                                                                                                                                                                                                 *      * Reverse the migrations.
                                                                                                                                                            <?php
                                                                                                                                                            
                                                                                                                                                            use Illuminate\Database\Migrations\Migration;
                                                                                                                                                            use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                            use Illuminate\Support\Facades\Schema;
                                                                                                                                                            
                                                                                                                                                            return new class extends Migration
                                                                                                                                                            {
                                                                                                                                                                /**
                                                                                                                                                                 *      * Run the migrations.
                                                                                                                                                                 *      */
                                                                                                                                                                    public function up(): void
                                                                                                                                                                        {
                                                                                                                                                                            Schema::create('plans', function (Blueprint $table) {
                                                                                                                                                                                        $table->id();
                                                                                                                                                                                                    $table->string('name');
                                                                                                                                                                                                                $table->text('description')->nullable();
                                                                                                                                                                                                                            $table->decimal('price_monthly', 10, 2)->nullable();
                                                                                                                                                                                                                                        $table->decimal('price_yearly', 10, 2)->nullable();
                                                                                                                                                                                                                                                    $table->integer('trial_days')->default(0);
                                                                                                                                                                                                                                                                $table->json('features')->nullable(); // Store features as JSON array
                                                                                                                                                                                                                                                                //             $table->string('stripe_plan_id_monthly')->unique()->nullable();
                                                                                                                                                                                                                                                                //             $table->string('stripe_plan_id_yearly')->unique()->nullable();
                                                                                                                                                                                                                                                                //             $table->string('paypal_plan_id_monthly')->unique()->nullable();
                                                                                                                                                                                                                                                                //             $table->string('paypal_plan_id_yearly')->unique()->nullable();
                                                                                                                                                                                                                                                                //             $table->enum('status', ['active', 'inactive', 'archived'])->default('active');
                                                                                                                                                                                                                                                                //             $table->timestamps(); // Adds created_at and updated_at
                                                                                                                                                                                                                                                                //         });
                                                                                                                                                                                                                                                                //     }
                                                                                                                                                                                                                                                                // 
                                                                                                                                                                                                                                                                    /**
                                                                                                                                                                                                                                                                     *      * Reverse the migrations.
                                                                                                            <?php
                                                                                                            
                                                                                                            use Illuminate\Database\Migrations\Migration;
                                                                                                            use Illuminate\Database\Schema\Blueprint;
                                                                                                            use Illuminate\Support\Facades\Schema;
                                                                                                            
                                                                                                            return new class extends Migration
                                                                                                            {
                                                                                                                /**
                                                                                                                 *      * Run the migrations.
                                                                                                                 *      */
                                                                                                                    public function up(): void
                                                                                                                        {
                                                                                                                            Schema::create(\'subscriptions\', function (Blueprint $table) {
                                                                                                                                        $table->id();
                                                                                                                                                    $table->foreignId(\'user_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                $table->foreignId(\'plan_id\')->constrained();
                                                                                                                                                                            $table->string(\'stripe_subscription_id\')->unique()->nullable();
                                                                                                                                                                                        $table->string(\'paypal_subscription_id\')->unique()->nullable();
                                                                                                                                                                                                    $table->enum(\'status\', [\'active\', \'trialing\', \'past_due\', \'canceled\', \'unpaid\', \'expired\', \'pending\']);
                                                                                                                                                                                                                $table->enum(\'billing_cycle\', [\'monthly\', \'yearly\', \'trial\']);
                                                                                                                                                                                                                            $table->timestamp(\'start_date\');
                                                                                                                                                                                                                                        $table->timestamp(\'end_date\')->nullable();
                                                                                                                                                                                                                                                    $table->timestamp(\'trial_end_date\')->nullable();
                                                                                                                                                                                                                                                                $table->timestamp(\'renewal_date\')->nullable();
                                                                                                                                                                                                                                                                            $table->boolean(\'cancel_at_period_end\')->default(false);
                                                                                                                                                                                                                                                                                        $table->string(\'payment_method_id\')->nullable(); // e.g., Stripe PaymentMethod ID
                                                                                                                                                                                                                                                                                        //             $table->foreignId(\'referred_by_affiliate_id\')->nullable()->constrained(\'affiliates\')->onDelete(\'set null\');
                                                                                                                                                                                                                                                                                        //             $table->timestamps(); // Adds created_at and updated_at
                                                                                                                                                                                                                                                                                        //         });
                                                                                                                                                                                                                                                                                        //     }
                                                                                                                                                                                                                                                                                        // 
                                                                                                                                                                                                                                                                                            /**
                                                                                                                                                                                                                                                                                             *      * Reverse the migrations.
                                                                                                                                                                                                                                                        <?php
                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                        use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                        use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                        use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                        return new class extends Migration
                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                            /**
                                                                                                                                                                                                                                                             *      * Run the migrations.
                                                                                                                                                                                                                                                             *      */
                                                                                                                                                                                                                                                                public function up(): void
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        Schema::create(\'licenses\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                    $table->id();
                                                                                                                                                                                                                                                                                                $table->foreignId(\'user_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                            $table->foreignId(\'subscription_id\')->unique()->constrained()->onDelete(\'cascade\'); // One license per subscription
                                                                                                                                                                                                                                                                                                            //             $table->string(\'license_key\", 100)->unique();
                                                                                                                                                                                                                                                                                                            //             $table->enum(\'status\", [\'active\", \'inactive\", \'expired\", \'revoked\"])->default(\'active\');
                                                                                                                                                                                                                                                                                                            //             $table->integer(\'activation_limit\')->default(1); // Max sites allowed
                                                                                                                                                                                                                                                                                                            //             $table->integer(\'activations_count\')->default(0); // Current active sites
                                                                                                                                                                                                                                                                                                            //             $table->timestamp(\'expiry_date\')->nullable(); // Determined by subscription end_date
                                                                                                                                                                                                                                                                                                            //             $table->text(\'notes\')->nullable();
                                                                                                                                                                                                                                                                                                            //             $table->timestamps(); // Adds created_at and updated_at
                                                                                                                                                                                                                                                                                                            //         });
                                                                                                                                                                                                                                                                                                            //     }
                                                                                                                                                                                                                                                                                                            // 
                                                                                                                                                                                                                                                                                                                /**
                                                                                                                                                                                                                                                                                                                 *      * Reverse the migrations.
                                                                                                                                                                                                                                                                            <?php
                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                            use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                            use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                            use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                            return new class extends Migration
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                /**
                                                                                                                                                                                                                                                                                 *      * Run the migrations.
                                                                                                                                                                                                                                                                                 *      */
                                                                                                                                                                                                                                                                                    public function up(): void
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Schema::create(\'license_activations\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                                        $table->id();
                                                                                                                                                                                                                                                                                                                    $table->foreignId(\'license_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                                                $table->foreignId(\'user_id\')->constrained()->onDelete(\'cascade\'); // Added for easier lookup
                                                                                                                                                                                                                                                                                                                                //             $table->string(\'domain\'); // Changed from site_url
                                                                                                                                                                                                                                                                                                                                //             $table->string(\'site_name\')->nullable();
                                                                                                                                                                                                                                                                                                                                //             $table->string(\'wordpress_version\', 50)->nullable();
                                                                                                                                                                                                                                                                                                                                //             $table->string(\'rankolab_version\', 50)->nullable();
                                                                                                                                                                                                                                                                                                                                //             $table->string(\'php_version\', 50)->nullable();
                                                                                                                                                                                                                                                                                                                                //             $table->ipAddress(\'ip_address\')->nullable();
                                                                                                                                                                                                                                                                                                                                //             $table->text(\'user_agent\')->nullable(); // From Rankolab.com arch
                                                                                                                                                                                                                                                                                                                                //             $table->timestamp(\'activated_at\')->useCurrent(); // Use current time on creation
                                                                                                                                                                                                                                                                                                                                //             $table->timestamp(\'last_checked_at\')->nullable();
                                                                                                                                                                                                                                                                                                                                //             $table->timestamp(\'deactivated_at\')->nullable();
                                                                                                                                                                                                                                                                                                                                //             $table->boolean(\'is_active\')->default(true);
                                                                                                                                                                                                                                                                                                                                //             $table->timestamps(); // Adds created_at and updated_at
                                                                                                                                                                                                                                                                                                                                // 
                                                                                                                                                                                                                                                                                                                                            $table->unique([\'license_id\', \'domain\'], \'license_domain_unique\'); // Prevent activating same domain twice on one license
                                                                                                                                                                                                                                                                                                                                            //         });
                                                                                                                                                                                                                                                                                                                                            //     }
                                                                                                                                                                                                                                                                                                                                            // 
                                                                                                                                                                                                                                                                                                                                                /**
                                                                                                                                                                                                                                                                                                                                                 *      * Reverse the migrations.
                                                                                                                                                                                                                                                                                                            <?php
                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                            use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                                                            use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                                                            use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                            return new class extends Migration
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                /**
                                                                                                                                                                                                                                                                                                                 *      * Run the migrations.
                                                                                                                                                                                                                                                                                                                 *      */
                                                                                                                                                                                                                                                                                                                    public function up(): void
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            Schema::create(\'license_activations\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                                                                        $table->id();
                                                                                                                                                                                                                                                                                                                                                    $table->foreignId(\'license_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                                                                                $table->foreignId(\'user_id\')->constrained()->onDelete(\'cascade\'); // Added for easier lookup
                                                                                                                                                                                                                                                                                                                                                                //             $table->string(\'domain\'); // Changed from site_url
                                                                                                                                                                                                                                                                                                                                                                //             $table->string(\'site_name\')->nullable();
                                                                                                                                                                                                                                                                                                                                                                //             $table->string(\'wordpress_version\', 50)->nullable();
                                                                                                                                                                                                                                                                                                                                                                //             $table->string(\'rankolab_version\', 50)->nullable();
                                                                                                                                                                                                                                                                                                                                                                //             $table->string(\'php_version\', 50)->nullable();
                                                                                                                                                                                                                                                                                                                                                                //             $table->ipAddress(\'ip_address\')->nullable();
                                                                                                                                                                                                                                                                                                                                                                //             $table->text(\'user_agent\')->nullable(); // From Rankolab.com arch
                                                                                                                                                                                                                                                                                                                                                                //             $table->timestamp(\'activated_at\')->useCurrent(); // Use current time on creation
                                                                                                                                                                                                                                                                                                                                                                //             $table->timestamp(\'last_checked_at\')->nullable();
                                                                                                                                                                                                                                                                                                                                                                //             $table->timestamp(\'deactivated_at\')->nullable();
                                                                                                                                                                                                                                                                                                                                                                //             $table->boolean(\'is_active\')->default(true);
                                                                                                                                                                                                                                                                                                                                                                //             $table->timestamps(); // Adds created_at and updated_at
                                                                                                                                                                                                                                                                                                                                                                // 
                                                                                                                                                                                                                                                                                                                                                                            $table->unique([\'license_id\', \'domain\'], \'license_domain_unique\'); // Prevent activating same domain twice on one license
                                                                                                                                                                                                                                                                                                                                                                            //         });
                                                                                                                                                                                                                                                                                                                                                                            //     }
                                                                                                                                                                                                                                                                                                                                                                            // 
                                                                                                                                                                                                                                                                                                                                                                                /**
                                                                                                                                                                                                                                                                                                                                                                                 *      * Reverse the migrations.
                                                                                                                                                                                                                                                                                                                                            <?php
                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                            use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                                                                                            use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                                                                                            use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                            return new class extends Migration
                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                /**
                                                                                                                                                                                                                                                                                                                                                 *      * Run the migrations.
                                                                                                                                                                                                                                                                                                                                                 *      */
                                                                                                                                                                                                                                                                                                                                                    public function up(): void
                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                            Schema::create(\'license_activations\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                                                                                                        $table->id();            $table->string(\'wordpress_version\\", 50)->nullable();\\]', 50)->nullable();\n            $table->string(\'php_version\', 50)->nullable();\n            $table->ipAddress(\'ip_address\')->nullable();\n            $table->text(\'user            $table->timestamp(\'activated_at\")->useCurrent(); // Use current time on creation\n            $table->timestamp(\'last_checked_at\")->nullable();\n            $table->timestamp(\'deactivated_at\")->nullable();\n            $table->boolean(\'is_active\")->default(true);\n            $table->timestamps(); // Adds created_at and updated_a\\]\[\", \\\'domain\\\']\", \\\'license_domain_unique\\\'); // Prevent activating same domain twice on one license\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::dro<?php
                                                                                                                                                                                                                                                                                                                                                                        // 
                                                                                                                                                                                                                                                                                                                                                                        use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                                                                                                                        use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                                                                                                                        use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                        return new class extends Migration
                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                            /**
                                                                                                                                                                                                                                                                                                                                                                             *      * Run the migrations.            $table->id();
                                                                                                                                                                                                                                                                                                                                                                             *             $table->foreignId(\'user_id\')->nullable()->unique()->constrained()->onDelete(\'set null\'); // Link to user account, optional
                                                                                                                                                                                                                                                                                                                                                                             *             $table->string(\'affiliate_code\')->unique();
                                                                                                                                                                                                                                                                                                                                                                             *             $table->enum(\'status\', [\"active\", \"inactive\", \"pending\", \"rejected\"])->default(\'pending\');
                                                                                                                                                                                                                                                                                                                                                                             *             $table->decimal(\'commission_rate\', 8, 2)->default(20.00); // Default 20%             $table->text(\'notes\")->nullable();\n            $table->timestamps(); // Adds created_at and updated_at\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n      <?php
                                                                                                                                                                                                                                                                                                                                                                             // 
                                                                                                                                                                                                                                                                                                                                                                             use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                                                                                                                             use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                                                                                                                             use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                             return new class extends Migration
                                                                                                                                                                                                                                                                                                                                                                             {
                                                                                                                                                                                                                                                                                                                                                                                 /**
                                                                                                                                                                                                                                                                                                                                                                                  *      * Run the migrations.
                                                                                                                                                                                                                                                                                                                                                                                       */
                                                                                                                                                                                                                                                                                                                                                                                          public function up(): void
                                                                                                                                                                                                                                                                                                                                                                                              {
                                                                                                                                                                                                                                                                                                                                                                                                  Schema::create(\'referrals\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                                                                                                                                              $table->id();
                                                                                                                                                                                                                                                                                                                                                                                                                          $table->foreignId(\'affiliate_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                                                                                                                                                      $table->foreignId(\'referred_user_id\')->nullable()->constrained(\'users\')->onDelete(\'set null\'); // User who signed up
                                                                                                                                                                                                                                                                                                                                                                                                                                      //             $table->foreignId(\'subscription_id\')->nullable()->constrained()->onDelete(\'set null\'); // Subscription that resulted from referral
                                                                                                                                                                                                                                                                                                                                                                                                                                      //             $table->string(\'referral_code_used\');
                                                                                                                                                                                                                                                                                                                                                                                                                                      //             $table->ipAddress(\'visitor_ip\")->nullable();
                                                                                                                                                                                                                                                                                                                                                                                                                                      //             $table->text(\'landing_page\")->nullable();
                                                                                                                                                                                                                                                                                                                                                                                                                                      //             $table->enum(\'status\", [\"pending\", \"converted\", \"rejected\"])->default(\'pending\");
                                                                                                                                                                                                                                                                                                                                                                                                                                      //             $table->timestamp(\'conversion_date\")->nullable();
                                                                                                                                                                                                                                                                                                                                                                                                                                      //             $table->timestamps(); // Adds created_at and updated_at
                                                                                                                                                                                                                                                                                                                                                                                                                                      //         });
                                                                                                                                                                                                                                                                                                                                                                                                                                      //     }
                                                                                                                                                                                                                                                                                                                                                                                                                                      // 
                                                                                                                                                                                                                                                                                                                                                                                                                                          /**
                                                                                                                                                                                                                                                                                                                                                                                                                                           *      * Reverse the migrations.
                                                                                                                                                                                                                                                                                                                                                                                                      <?php
                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                      use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                                                                                                                                                      use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                                                                                                                                                      use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                      return new class extends Migration
                                                                                                                                                                                                                                                                                                                                                                                                      {
                                                                                                                                                                                                                                                                                                                                                                                                          /**
                                                                                                                                                                                                                                                                                                                                                                                                           *      * Run the migrations.
                                                                                                                                                                                                                                                                                                                                                                                                           *      */
                                                                                                                                                                                                                                                                                                                                                                                                              public function up(): void
                                                                                                                                                                                                                                                                                                                                                                                                                  {
                                                                                                                                                                                                                                                                                                                                                                                                                      Schema::create(\'referrals\', function (Blueprint $table) {            $table->string(\'referral_code_used\');\n            $table->ipAddress(\'visitor_ip\')->nullable();\n            $table->text(\'landing_page\')->nullable();\n            $table->enum(\'status\', [\"pending\", \"converted\", \"rejected\"])->default(\'pending\');\n            $table->timestamp(\'conversion_date\')->nullable();\n            $table->timestamps(); // Adds created_at and updated_at\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n     <?php
                                                                                                                                                                                                                                                                                                                                                                                                                      // 
                                                                                                                                                                                                                                                                                                                                                                                                                      use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                                                                                                                                                                      use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                                                                                                                                                                      use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                      return new class extends Migration
                                                                                                                                                                                                                                                                                                                                                                                                                      {
                                                                                                                                                                                                                                                                                                                                                                                                                          /**
                                                                                                                                                                                                                                                                                                                                                                                                                           *      * Run the migrations.
                                                                                                                                                                                                                                                                                                                                                                                                                           *      */
                                                                                                                                                                                                                                                                                                                                                                                                                              public function up(): void
                                                                                                                                                                                                                                                                                                                                                                                                                                  {
                                                                                                                                                                                                                                                                                                                                                                                                                                      Schema::create(\'commissions\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                  $table->id();            $table->decimal(\'amount\\[\", 8, 2);\n            $table->decimal(\\\"commission_rate_at_time\\\", 5, 2); // Store the rate at the time of commission\n            $table->enum(\\\"status\\\", [\\\"pending\\\", \\\"approved\\\", \\\"paid\\\", \\\"rejected\\\"])->default(\\\"pending\\\");\n            $table->timestamp(\\\"approved_at\\\")->nullable();\n            $table->timestamp(\\\"paid_at\\\")->nullable();\n            $table->foreignId(\\\"payout_id\\\")->nullable()->constrained(\\\"affiliate_payouts\\\")->onDelete(\\\"set null\\\"); // Link to the payout batch\n            $table->timestamps(); // Adds created_at and updated_at\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Sch<?php
                                                                                                                                                                                                                                                                                                                                                                                                                                                  // 
                                                                                                                                                                                                                                                                                                                                                                                                                                                  use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                                                                                                                                                                                                                                                  use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                                                                                                                                                                                                                                                  use Illuminate\Support\Facades\Schema;
                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                  return new class extends Migration
                                                                                                                                                                                                                                                                                                                                                                                                                                                  {
                                                                                                                                                                                                                                                                                                                                                                                                                                                      /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                       *      * Run the migrations.
                                                                                                                                                                                                                                                                                                                                                                                                                                                       *      */
                                                                                                                                                                                                                                                                                                                                                                                                                                                          public function up(): void
                                                                                                                                                                                                                                                                                                                                                                                                                                                              {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Schema::create(\'affiliate_payouts\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              $table->id();            $table->string(\"transaction_id\")->nullable(); // Transaction ID from payment processor
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          $table->text(\"notes\")->nullable();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      $table->timestamp(\"payout_date\")->nullable();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  $table->timestamps(); // Adds created_at and updated_at
                    });
                    }

                        /**
                         *      * Reverse the migrations.
                         *      */<?php

                         use Illuminate\Database\Migrations\Migration;
                         use Illuminate\Database\Schema\Blueprint;
                         use Illuminate\Support\Facades\Schema;

                         return new class extends Migration
                         {
                             /**        Schema::create(\'users\', function (Blueprint $table) {\n            $table->id();\n            $table->string(\'first_name\\[\", 50);\n            $table->string(\\\"last_name\\\", 50);\n            $table->string(\\\"username\\\", 50)->unique();\n            $table->string(\\\"email\\\")->unique();\n            $table->timestamp(\\\"email_verified_at\\\")->nullable();\n            $table->string(\\\"password\\\"); // Laravel handles hashing\n            $table->enum(\\\"role\\\", [\\\"user\\\", \\\"admin\\\", \\\"support\\\"])->default(\\\"user\\\");\n            $table->enum(\\\"status\\\", [\\\"active\\\", \\\"inactive\\\", \\\"suspended\\\"])->default(\\\"active\\\");\n            $table->boolean(\\\"two_factor_enabled\\\")->default(false);\n            $table->text(\\\"two_factor_secret\\\")->nullable();\n            $table->foreignId(\\\"affiliate_id\\\")->nullable()->constrained(\\\"affiliates\\\")->onDelete(\\\"set null\\\");\n            $table->rememberToken();\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n     <?php
                             // 
                             use Illuminate\Database\Migrations\Migration;
                             use Illuminate\Database\Schema\Blueprint;
                             use Illuminate\Support\Facades\Schema;
                             
                             return new class extends Migration
                             {
                                 /**
                                  *      * Run the migrations.
                                       */
                                          public function up(): void
                                              {
                                                  // Rename existing table if it exists, otherwise create new
                                                  //         if (Schema::hasTable(\'purchases\')) {
                                                  //             Schema::rename(\'purchases\', \'transactions\');
                                                  //         }
                                                  // 
                                                          Schema::table(\'transactions\', function (Blueprint $table) {
                                                                      // Add missing columns based on documentation
                                                                      //             if (!Schema::hasColumn(\'transactions\', \'subscription_id\')) {
                                                                      //                 $table->foreignId(\'subscription_id\')->nullable()->constrained()->onDelete(\'set null\');
                                                                      //             }
                                                                      //             if (!Schema::hasColumn(\'transactions\', \'plan_id\')) {
                                                                      //                 $table->foreignId(\'plan_id\')->nullable()->constrained()->onDelete(\'set null\');
                                                                      //             }
                                                                      //             if (!Schema::hasColumn(\'transactions\', \'payment_method\')) {
                                                                      //                 $table->string(\'payment_method\', 50)->nullable(); // e.g., \'card\', \'paypal\'
                                                                      //             }
                                                                      //             if (!Schema::hasColumn(\'transactions\', \'payment_gateway\')) {
                                                                      //                 $table->string(\'payment_gateway\', 50)->nullable(); // e.g., \'stripe\', \'paypal\'
                                                                      //             }
                                                                      //             if (!Schema::hasColumn(\'transactions\', \'description\')) {
                                                                      //                 $table->text(\'description\')->nullable();
                                                                      //             }
                                                                      //             // Rename stripe_session_id to gateway_transaction_id for clarity
                                                                      //             if (Schema::hasColumn(\'transactions\', \'stripe_session_id\') && !Schema::hasColumn(\'transactions\', \'gateway_transaction_id\')) {
                                                                      //                 $table->renameColumn(\'stripe_session_id\', \'gateway_transaction_id\');
                                                                      //             }
                                                                      //             // Ensure standard timestamps exist
                                                                      //             if (!Schema::hasColumn(\'transactions\', \'created_at\') || !Schema::hasColumn(\'transactions\', \'updated_at\')) {
                                                                      //                  $table->timestamps(); // Adds created_at and updated_at if missing
                                                                      //             }
                                                                      //             // Rename purchased_at to created_at if it exists and created_at doesn\'t
                                                                      //             if (Schema::hasColumn(\'transactions\', \'purchased_at\') && !Schema::hasColumn(\'transactions\', \'created_at\')) {
                                                                      //                  $table->renameColumn(\'purchased_at\', \'created_at\');
                                                                      //             }
                                                                      //         });
                                                                      //     }
                                                                      // 
                                                                          /**
                                                                           *      * Reverse the migrations.
                                                                           *      */
                                                                              public function down(): void
                                                                                  {
                                                                                      Schema::table(\'transactions\', function (Blueprint $table) {
                                                                                                  // Drop added columns
                                                                                                  //             $table->dropForeign([\'subscription_id\']);
                                                                                                  //             $table->dropColumn(\'subscription_id\');
                                                                                                  //             $table->dropForeign([\'plan_id\']);
                                                                                                  //             $table->dropColumn(\'plan_id\');
                                                                                                  //             $table->dropColumn(\'payment_method\');
                                                                                                  //             $table->dropColumn(\'payment_gateway\');
                                                                                                  //             $table->dropColumn(\'description\');
                                                                                                  // 
                                                                                                              // Rename gateway_transaction_id back to stripe_session_id if it exists
                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'gateway_transaction_id\') && !Sch < ? p h p 
                                                                                                              //  
                                                                                                               u s e   I l l u m$itnaabtlee\-D>arteanbaamseeC\oMliugmrna(t\i'ocnrse\aMtiegdr_aatti\o'n,; 
                                                                                                               \u'speu rIclhlausmeidn_aatte\\'D)a;t
                                                                                                               a b a s e \ S c h e m a \}B
                                                                                                               l u e p r i n t ;}
                                                                                                               )u;s
                                                                                                               e
                                                                                                                 I l l u m i n a/t/e \OSputpipoonratl\lFya craedneasm\eS cthaebmlae; 
                                                                                                                 b
                                                                                                                 arcekt uirfn  nneeewd ecdl
                                                                                                                 a s s   e x t e n/d/s  SMcihgermaat:i:orne
                                                                                                                 n{a
                                                                                                                 m e ( \ '/t*r*a
                                                                                                                 n s a c t i*o nRsu\n' ,t h\e' pmuirgcrhaatsieosn\s'.)
                                                                                                                 ; 
                                                                                                                         *}/
                                                                                                                         
                                                                                                                         } ;   public function up(): void
                                                                                                                              {
                                                                                                                                 // Rename existing table if it exists, otherwise create new
                                                                                                                                 //         if (Schema::hasTable(\'purchases\')) {
                                                                                                                                 //             Schema::rename(\'purchases\', \'transactions\');
                                                                                                                                 //         }
                                                                                                                                 // 
                                                                                                                                         Schema::table(\'transactions\', function (Blueprint $table) {
                                                                                                                                                     // Add missing columns based on documentation
                                                                                                                                                     //             if (!Schema::hasColumn(\'transactions\', \'subscription_id\')) {
                                                                                                                                                     //                 $table->foreignId(\'subscription_id\')->nullable()->constrained()->onDelete(\'set null\');
                                                                                                                                                     //             }
                                                                                                                                                     //             if (!Schema::hasColumn(\'transactions\', \'plan_id\')) {
                                                                                                                                                     //                 $table->foreignId(\'plan_id\')->nullable()->constrained()->onDelete(\'set null\');
                                                                                                                                                     //             }
                                                                                                                                                     //             if (!Schema::hasColumn(\'transactions\', \'payment_method\')) {
                                                                                                                                                     //                 $table->string(\'payment_method\', 50)->nullable(); // e.g., \'card\', \'paypal\'
                                                                                                                                                     //             }
                                                                                                                                                     //             if (!Schema::hasColumn(\'transactions\', \'payment_gateway\')) {
                                                                                                                                                     //                 $table->string(\'payment_gateway\', 50)->nullable(); // e.g., \'stripe\', \'paypal\'
                                                                                                                                                     //             }
                                                                                                                                                     //             if (!Schema::hasColumn(\'transactions\', \'description\')) {
                                                                                                                                                     //                 $table->text(\'description\')->nullable();
                                                                                                                                                     //             }
                                                                                                                                                     //             // Rename stripe_session_id to gateway_transaction_id for clarity
                                                                                                                                                     //             if (Schema::hasColumn(\'transactions\', \'stripe_session_id\') && !Schema::hasColumn(\'transactions\', \'gateway_transaction_id\')) {
                                                                                                                                                     //                 $table->renameColumn(\'stripe_session_id\', \'gateway_transaction_id\');
                                                                                                                                                     //             }
                                                                                                                                                     //             // Ensure standard timestamps exist
                                                                                                                                                     //             if (!Schema::hasColumn(\'transactions\', \'created_at\') || !Schema::hasColumn(\'transactions\', \'updated_at\')) {
                                                                                                                                                     //                  $table->timestamps(); // Adds created_at and updated_at if missing
                                                                                                                                                     //             }
                                                                                                                                                     //             // Rename purchased_at to created_at if it exists and created_at doesn\'t
                                                                                                                                                     //             if (Schema::hasColumn(\'transactions\', \'purchased_at\') && !Schema::hasCo<?php
                                                                                                                                                     // 
                                                                                                                                                     use Illuminate\Database\Migrations\Migration;
                                                                                                                                                     use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                     use Illuminate\Support\Facades\Schema;
                                                                                                                                                     
                                                                                                                                                     return new class extends Migration
                                                                                                                                                     {
                                                                                                                                                         /**
                                                                                                                                                          *      * Run the migrations.
                                                                                                                                                               */
                                                                                                                                                                  public function up(): void
                                                                                                                                                                      {
                                                                                                                                                                          // Rename existing table if it exists, otherwise create new
                                                                                                                                                                          //         if (Schema::hasTable(\'purchases\')) {
                                                                                                                                                                          //             Schema::rename(\'purchases\', \'transactions\');
                                                                                                                                                                          //         }
                                                                                                                                                                          // 
                                                                                                                                                                                  Schema::table(\'transactions\', function (Blueprint $table) {
                                                                                                                                                                                              // Add missing columns based on documentation
                                                                                                                                                                                              //             if (!Schema::hasColumn(\'transactions\', \'subscription_id\')) {
                                                                                                                                                                                              //                 $table->foreignId(\'subscription_id\')-            if (!Schema::hasColumn(\'transactions\', \'payment_method\')) {
                                                                                                                                                                                              //                 $table->string(\'payment_method\', 50)->nullable(); // e.g., \'card\', \'paypal\'
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             if (!Schema::hasColumn(\'transactions\', \'payment_gateway\')) {
                                                                                                                                                                                              //                 $table->string(\'payment_gateway\', 50)->nullable(); // e.g., \'stripe\', \'paypal\'
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             if (!Schema::hasColumn(\'transactions\', \'description\')) {
                                                                                                                                                                                              //                 $table->text(\'description\')->nullable();
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             // Rename stripe_session_id to gateway_transaction_id for clarity
                                                                                                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'stripe_session_id\') && !Schema::hasColumn(\'transactions\', \'gateway_transaction_id\')) {
                                                                                                                                                                                              //                 $table->renameColumn(\'stripe_session_id\', \'gateway_transaction_id\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             // Ensure standard timestamps exist
                                                                                                                                                                                              //             if (!Schema::hasColumn(\'transactions\', \'created_at\') || !Schema::hasColumn(\'transactions\', \'updated_at\')) {
                                                                                                                                                                                              //                  $table->timestamps(); // Adds created_at and updated_at if missing
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             // Rename purchased_at to created_at if it exists and created_at doesn\'t
                                                                                                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'purchased_at\') && !Schema::hasCo    /**
                                                                                                                                                                                              //      * Reverse the migrations.
                                                                                                                                                                                              //      */
                                                                                                                                                                                              //     public function down(): void
                                                                                                                                                                                              //     {
                                                                                                                                                                                              //         Schema::table(\'transactions\', function (Blueprint $table) {
                                                                                                                                                                                              //             // Drop added columns if they exist
                                                                                                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'subscription_id\')) {
                                                                                                                                                                                              //                 $table->dropForeign([\'subscription_id\']);
                                                                                                                                                                                              //                 $table->dropColumn(\'subscription_id\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'plan_id\')) {
                                                                                                                                                                                              //                 $table->dropForeign([\'plan_id\']);
                                                                                                                                                                                              //                 $table->dropColumn(\'plan_id\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'payment_method\')) {
                                                                                                                                                                                              //                 $table->dropColumn(\'payment_method\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'payment_gateway\')) {
                                                                                                                                                                                              //                 $table->dropColumn(\'payment_gateway\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'description\')) {
                                                                                                                                                                                              //                 $table->dropColumn(\'description\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              // 
                                                                                                                                                                                                          // Rename gateway_transaction_id back to stripe_session_id if it exists
                                                                                                                                                                                                          //             if (Schema::hasColumn(\'transactions\', \'gateway_transaction_id\') && !Schema::hasColumn(\'transactions\', \'stripe_session_id\')) {
                                                                                                                                                                                                          //                 $table->renameColumn(\'gateway_transaction_id\', \'stripe_session_id\');
                                                                                                                                                                                                          //             }
                                                                                                                                                                                                          //             // Rename created_at back to purchased_at if it exists and purchased_at doesn\'t
                                                                                                                                                                                                          //             if (Schema::hasColumn(\'transactions\', \'created_at\") && !Schema::hasColumn(\'transactions\', \'purchased_at\')) {
                                                                                                                                                                                                          //                  $table->renameColumn(\'created_at\', \'purchased_at\');
                                                                                                                                                                                                          //             }
                                                                                                                                                                                                          //         });
                                                                                                                                                                                                          // 
                                                                                                                                                                                                                  // Optionally rename table back if needed<?php

                                                                                                                                                                                                                  use Illuminate\Database\Migrations\Migration;
                                                                                                                                                                                                                  use Illuminate\Database\Schema\Blueprint;
                                                                                                                                                                                                                  use Illuminate\Support\Facades\Schema;

                                                                                                                                                                                                                  return new class extends Migration
                                                                                                                                                                                                                  {
                                                                                                                                                                                                                      /**
                                                                                                                                                                                                                       *      * Run the migrations.
                                                                                                                                                                                                                       *      */
                                                                                                                                                                                                                          public function up(): void
                                                                                                                                                                                                                              {
                                                                                                                                                                                                                                  Schema::create(\'support_conversations\', function (Blueprint $table) {
                                                                                                                                                                                                                                              $table->id();
                                                                                                                                                                                                                                                          $table->foreignId(\'user_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                      $table->foreignId(\'assigned_to\')->nullable()->constrained(\'users\')->onDelete(\'set null\'); // FK to users table (support staff)
                                                                                                                                                                                                                                                                                  $table->string(\'subject\');
                                                                                                                                                                                                                                                                                              $table->enum(\'status\', [\'open\', \'assigned\', \'pending_user\', \'pending_support\', \'closed\'])->default(\'open\');
                                                                                                                                                                                                                                                                                                          $table->enum(\'priority\', [\'low\', \'medium\', \'high\', \'urgent\'])->default(\'medium\');
                                                                                                                                                                                                                                                                                                                      $table->timestamp(\'last_reply_at\')->nullable();
                                                                                                                                                                                                                                                                                                                                  $table->timestamps();
                    });
                    }

                        /**
                         *      * Reverse the migrations.
                         *      */<?php

                         use Illuminate\Database\Migrations\Migration;
                         use Illuminate\Database\Schema\Blueprint;
                         use Illuminate\Support\Facades\Schema;

                         return new class extends Migration
                         {
                             /**
                              *      * Run the migrations.
                                   */
                                      public function up(): void
                                          {
                                              Schema::create(\'support_messages\', function (Blueprint $table) {
                                                          $table->id();
                                                                      $table->foreignId(\'conversation_id\')->constrained(\'support_conversations\')->onDelete(\'cascade\');
                                                                                  $table->foreignId(\'user_id\')->nullable()->constrained(\'users\')->onDelete(\'set null\'); // User who sent the message (null if system/unassigned staff)
                                                                                              $table->text(\'message_body\');
                                                                                                          $table->boolean(\'is_internal_note\')->default(false); // For internal staff notes
                                                                                                                      $table->timestamps();
                    });
                    }

                        /**
                         *      * Reverse the migrations.
                         *      */# Reviewing AuthController.php to assess current implementation status
                            public function down(): void
                                {
                                    Schema::dropIfExists(\'support_messages\');
                    }
                    };
                            public function down(): void
                                {
                                    Schema::dropIfExists(\'support_conversations\');
                    }
                                    };
                                                                                                                                                                                                                  //         // if (Schema::hasTable(\'transactions\')) {
                                                                                                                                                                                                                  //         //     Schema::rename(\'transactions\', \'purchases\');
                                                                                                                                                                                                                  //         // }
                                                                                                                                                                                                                  //     }
                                                                                                                                                                                                                  // };lumn(\'transactions\', \'created_at\')) {
                                                                                                                                                                                              //                  $table->renameColumn(\'purchased_at\', \'created_at\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //         });
                                                                                                                                                                                              //     }
                                                                                                                                                                                              // >nullable()->constrained()->onDelete(\'set null\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              //             if (!Schema::hasColumn(\'transactions\', \'plan_id\')) {
                                                                                                                                                                                              //                 $table->foreignId(\'plan_id\')->nullable()->constrained()->onDelete(\'set null\');
                                                                                                                                                                                              //             }
                                                                                                                                                                                              // lumn(\'transactions\', \'created_at\')) {
                                                                                                                                                     //                  $table->renameColumn(\'purchased_at\', \'created_at\');
                                                                                                                                                     //             }
                                                                                                                                                     //         });
                                                                                                                                                     //     }
                                                                                                                                                     // ema::hasColumn(\'transactions\', \'stripe_session_id\')) {
                                                                                                              //                 $table->renameColumn(\'gateway_transaction_id\', \'stripe_session_id\');
                                                                                                              //             }
                                                                                                              //             // Rename created_at back to purchased_at if it exists
                                                                                                              //             if (Schema::hasColumn(\'transactions\', \'created_at\') && !Schema::hasColumn(\'transactions\', \'purchased_at\')) {
                                                                                                              //  Schema::dropIfExists(\\\"users\\\");\n    }\n};
                              *      * Run the migrations.
                                   */
                                      public function up(): void
                                          {

                            public function down(): void
                                {
                                    Schema::dropIfExists(\"affiliate_payouts\");
                    }
                                    };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          $table->foreignId(\'affiliate_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      $table->decimal(\'amount\', 8, 2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  $table->enum(\'status\', [\"pending\", \"processing\", \"paid\", \"failed\"])->default(\'pending\');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              $table->enum(\'payment_method\', [\"paypal\", \"bank_transfer\"]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ema::dropIfExists(\\\"commissions\\\");\n    }\n};
                                                                                                                                                                                                                                                                                                                                                                                                                                                              $table->foreignId(\'affiliate_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          $table->foreignId(\'referral_id\')->nullable()->constrained()->onDelete(\'set null\');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      $table->foreignId(\'subscription_id\')->nullable()->constrained()->onDelete(\'set null\');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  $table->foreignId(\'transaction_id\')->nullable()->constrained()->onDelete(\'set null\'); // Link to the specific transaction generating commission
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // Schema::dropIfExists(\'referrals\');\n    }\n};
                                                                                                                                                                                                                                                                                                                                                                                                                                  $table->id();
                                                                                                                                                                                                                                                                                                                                                                                                                                              $table->foreignId(\'affiliate_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                                                                                                                                                                          $table->foreignId(\'referred_user_id\')->nullable()->constrained(\'users\')->onDelete(\'set null\'); // User who signed up
                                                                                                                                                                                                                                                                                                                                                                                                                                                          //             $table->foreignId(\'subscription_id\')->nullable()->constrained(\'subscriptions\')->onDelete(\'set null\'); // Subscription that resulted from referral
                                                                                                                                                                                                                                                                                                                                                                                                                                                          // *      */
                                                                                                                                                                                                                                                                                                                                                                                                                                              public function down(): void
                                                                                                                                                                                                                                                                                                                                                                                                                                                  {
                                                                                                                                                                                                                                                                                                                                                                                                                                                      Schema::dropIfExists(\'referrals\');
                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                      };Schema::dropIfExists(\'affiliates\');\n    }\n};commission
                                                                                                                                                                                                                                                                                                                                                                             *             $table->enum(\'payment_method\', [\"paypal\", \"bank_transfer\"])->nullable();
                                                                                                                                                                                                                                                                                                                                                                             *             $table->string(\'payment_email\')->nullable();
                                                                                                                                                                                                                                                                                                                                                                             *             $table->text(\'bank_details\')->nullable(); // Consider encryption
                                                                                                                                                                                                                                                                                                                                                                             *             $table->string(\'website_url\')->nullable();
                                                                                                                                                                                                                                                                                                                                                                             * 
                                                                                                                                                                                                                                                                                                                                                                             *      */
                                                                                                                                                                                                                                                                                                                                                                                public function up(): void
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        Schema::create(\'affiliates\', function (Blueprint $table) {
                                                                                                                                                                                                                                                                                                                                                                                        pIfExists(\\\'license_activations\\\');\n    }\n};t\n\n            $table->unique([\\'license_id\\\[_agent\')->nullable(); // From Rankolab.com arch\n\n            $table->string(\'rankolab_version\\[
                                                                                                                                                                                                                                                                                                                                                                                    $table->foreignId(\'license_id\')->constrained()->onDelete(\'cascade\');
                                                                                                                                                                                                                                                                                                                                                                                                $table->foreignId(\'user_id\')->constrained()->onDelete(\'cascade\'); // Added for easier lookup
                                                                                                                                                                                                                                                                                                                                                                                                //             $table->string(\'domain\'); // Changed from site_url
                                                                                                                                                                                                                                                                                                                                                                                                //             $table->string(\'site_name\')->nullable();
                                                                                                                                                                                                                                                                                                                                                                                                // *      */
                                                                                                                                                                                                                                                                                                                                                                                    public function down(): void
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            Schema::dropIfExists(\'license_activations\');
                    }
                                                                                                                                                                                                                                                                                                                                                                                            };*      */
                                                                                                                                                                                                                                                                                                                                                    public function down(): void
                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                            Schema::dropIfExists(\'license_activations\');
                    }
                                                                                                                                                                                                                                                                                                                                                            };*      */
                                                                                                                                                                                                                                                                                                                    public function down(): void
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            Schema::dropIfExists(\'licenses\');
                    }
                                                                                                                                                                                                                                                                                                                            };*      */
                                                                                                                                                                                                                                                                                                public function down(): void
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Schema::dropIfExists(\'subscriptions\');
                    }
                                                                                                                                                                                                                                                                                                        };*      */
                                                                                                                                                                                                                                                                        public function down(): void
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                Schema::dropIfExists('plans');
                    }
                    };*      */
                                                                                                                                                                                                    public function down(): void
                                                                                                                                                                                                        {
                                                                                                                                                                                                            Schema::dropIfExists(\'plans\');
                    }
                                                                                                                                                                                                            };')
                    }
             */
    {
        Schema::dropIfExists('users');
    }
};
